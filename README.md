# WebSocketåŠ¨æ€æ•°æ®æ¨¡æ‹Ÿå™¨

## é¡¹ç›®ç®€ä»‹

è¿™æ˜¯ä¸€ä¸ªåŸºäºSpring Bootçš„WebSocketåŠ¨æ€æ•°æ®æ¨¡æ‹Ÿå™¨ï¼Œæ”¯æŒæ™ºèƒ½æ•°æ®ç±»å‹è¯†åˆ«å’Œäº¤äº’å¼æ¨¡æ¿ç¼–è¾‘ã€‚é¡¹ç›®é‡‡ç”¨é«˜å†…èšä½è€¦åˆçš„è®¾è®¡åŸåˆ™ï¼Œæ”¯æŒå¤šå®¢æˆ·ç«¯è¿æ¥ã€å®æ—¶æ•°æ®æ¨é€å’ŒåŠ¨æ€JSONæ¨¡æ¿é…ç½®ã€‚

## ç¯å¢ƒè¦æ±‚

### Javaç‰ˆæœ¬
- **JDKç‰ˆæœ¬**: 1.8
- **ç¼–è¯‘ç›®æ ‡**: Java 1.8

### Mavenç‰ˆæœ¬
- **Mavenç‰ˆæœ¬**: 3.6.2
- **Maven Wrapper**: å·²é…ç½®ä¸ºä½¿ç”¨Maven 3.6.2

### Spring Bootç‰ˆæœ¬
- **Spring Boot**: 2.7.18 (å…¼å®¹JDK 1.8)

## åŠŸèƒ½ç‰¹æ€§

- âœ… **WebSocketå®æ—¶é€šä¿¡** - æ”¯æŒå¤šå®¢æˆ·ç«¯åŒæ—¶è¿æ¥
- âœ… **åŠ¨æ€JSONæ¨¡æ¿ç¼–è¾‘** - äº¤äº’å¼å­—æ®µç±»å‹é…ç½®
- âœ… **æ™ºèƒ½æ•°æ®ç±»å‹è¯†åˆ«** - æ ¹æ®å­—æ®µåå’Œå€¼è‡ªåŠ¨æ¨æ–­ç±»å‹
- âœ… **å­—æ®µé™åˆ¶é…ç½®** - æ”¯æŒæ•°å­—å’Œæ—¥æœŸç±»å‹çš„æœ€å¤§å€¼æœ€å°å€¼é™åˆ¶
- âœ… **è¿æ¥çŠ¶æ€ç›‘æ§** - å®æ—¶æ˜¾ç¤ºè¿æ¥æ•°å’Œè¿æ¥çŠ¶æ€
- âœ… **å‰ç«¯æµ‹è¯•ç•Œé¢** - å®Œæ•´çš„Webç•Œé¢ï¼Œæ”¯æŒæ¨¡æ¿ç¼–è¾‘å’Œæ•°æ®é¢„è§ˆ
- âœ… **REST APIæ¥å£** - æä¾›è¿æ¥æ•°æŸ¥è¯¢ç­‰API
- âœ… **è‡ªåŠ¨æ•°æ®æ¨é€** - æ ¹æ®æ¨¡æ¿é…ç½®è‡ªåŠ¨ç”Ÿæˆå’Œæ¨é€éšæœºæ•°æ®
- ğŸ”„ å®æ—¶WebSocketæ•°æ®æ¨é€
- ğŸ“Š åŠ¨æ€JSONæ¨¡æ¿é…ç½®
- ğŸ² éšæœºæ•°æ®ç”Ÿæˆ
- ğŸ“… æ”¯æŒå¤šç§æ•°æ®ç±»å‹ï¼ˆå­—ç¬¦ä¸²ã€æ•°å­—ã€å¸ƒå°”å€¼ã€æ—¥æœŸæ—¶é—´ã€æ•°ç»„ç­‰ï¼‰
- âš™ï¸ å¯é…ç½®çš„æ•°æ®èŒƒå›´å’Œé™åˆ¶
- ğŸ¯ é«˜çº§æ¨¡å¼æ”¯æŒå¤æ‚åµŒå¥—ç»“æ„
- ğŸ³ Dockerå®¹å™¨åŒ–éƒ¨ç½²
- ğŸŒ å¤šIPåœ°å€æ”¯æŒ

## æ„å»ºå’Œè¿è¡Œ

### ä½¿ç”¨Maven Wrapper (æ¨è)
```bash
# æ¸…ç†å¹¶ç¼–è¯‘
./mvnw clean compile

# è¿è¡Œæµ‹è¯•
./mvnw test

# æ‰“åŒ…
./mvnw package

# è¿è¡Œåº”ç”¨
./mvnw spring-boot:run
```

### ä½¿ç”¨æœ¬åœ°Maven
ç¡®ä¿æ‚¨çš„æœ¬åœ°Mavenç‰ˆæœ¬ä¸º3.6.2æˆ–å…¼å®¹ç‰ˆæœ¬ï¼š
```bash
mvn clean compile
mvn test
mvn package
mvn spring-boot:run
```

## æœåŠ¡é…ç½®

### ç«¯å£é…ç½®
- **æœåŠ¡ç«¯å£**: 1883
- **WebSocketç«¯ç‚¹**: `/`
- **HTTP API**: `/api/*`

### é…ç½®æ–‡ä»¶
`application.properties`:
```properties
# æœåŠ¡å™¨ç«¯å£é…ç½®
server.port=1883

# WebSocketè·¯å¾„é…ç½®
websocket.endpoint.path=/

# åº”ç”¨åç§°
spring.application.name=kinetic-simulator-websocket

# æ—¥å¿—é…ç½®
logging.level.com.example.kineticsimulatorwebsocker=INFO
logging.level.org.springframework.web.socket=DEBUG

# Jacksoné…ç½®
spring.jackson.default-property-inclusion=non_null
```

## ä½¿ç”¨æŒ‡å—

### 1. å¯åŠ¨æœåŠ¡
```bash
./mvnw spring-boot:run
```

### 2. è®¿é—®æµ‹è¯•é¡µé¢
æ‰“å¼€æµè§ˆå™¨è®¿é—®ï¼š`http://localhost:1883/test-client.html`

### 3. WebSocketè¿æ¥
- **è¿æ¥åœ°å€**: `ws://localhost:1883/`
- **è¿æ¥æ–¹å¼**: ç‚¹å‡»é¡µé¢ä¸Šçš„"è¿æ¥"æŒ‰é’®

### 4. æ¨¡æ¿ç¼–è¾‘æµç¨‹
1. **è¾“å…¥JSONæ¨¡æ¿** - åœ¨æ–‡æœ¬æ¡†ä¸­è¾“å…¥JSONæ ¼å¼çš„æ¨¡æ¿
2. **è§£æå¹¶ç¼–è¾‘** - ç‚¹å‡»æŒ‰é’®è§£ææ¨¡æ¿ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨è¯†åˆ«å­—æ®µç±»å‹
3. **é…ç½®å­—æ®µç±»å‹** - ä¸ºæ¯ä¸ªå­—æ®µé€‰æ‹©åˆé€‚çš„æ•°æ®ç±»å‹
4. **è®¾ç½®å­—æ®µé™åˆ¶** - ä¸ºæ•°å­—å’Œæ—¥æœŸç±»å‹è®¾ç½®æœ€å¤§å€¼æœ€å°å€¼ï¼ˆå¯é€‰ï¼‰
5. **åº”ç”¨æ¨¡æ¿** - ç‚¹å‡»æŒ‰é’®å°†é…ç½®å‘é€åˆ°åç«¯ï¼Œå¼€å§‹æ¥æ”¶æ•°æ®

## æ”¯æŒçš„æ•°æ®ç±»å‹

### åŸºç¡€ç±»å‹
- `string` - å­—ç¬¦ä¸²
- `int` - æ•´æ•°
- `double` - æµ®ç‚¹æ•°
- `boolean` - å¸ƒå°”å€¼
- `array` - æ•°ç»„
- `object` - å¯¹è±¡

### ç‰¹æ®Šæ ¼å¼
- `email` - é‚®ç®±åœ°å€
- `phone` - æ‰‹æœºå·ç 
- `date` - æ—¥æœŸæ—¶é—´
- `ip` - IPåœ°å€
- `url` - URLåœ°å€
- `uuid` - UUIDæ ‡è¯†ç¬¦
- `name` - ä¸­æ–‡å§“å
- `color` - é¢œè‰²åç§°

### èŒƒå›´é™åˆ¶ç±»å‹
- `age` - å¹´é¾„ (1-100)
- `year` - å¹´ä»½ (2000-2024)
- `month` - æœˆä»½ (1-12)
- `day` - æ—¥æœŸ (1-31)
- `hour` - å°æ—¶ (0-23)
- `minute` - åˆ†é’Ÿ (0-59)
- `second` - ç§’ (0-59)
- `port` - ç«¯å£ (1024-65535)
- `id` - ID (1-1000000)
- `price` - ä»·æ ¼ (0-1000)
- `rate` - æ¯”ç‡ (0-100%)
- `score` - åˆ†æ•° (0-10)
- `temperature` - æ¸©åº¦ (-10-40)
- `latitude` - çº¬åº¦ (-90-90)
- `longitude` - ç»åº¦ (-180-180)

## å­—æ®µé™åˆ¶åŠŸèƒ½

### åŠŸèƒ½è¯´æ˜
- ä¸º**æ•°å­—ç±»å‹**å’Œ**æ—¥æœŸç±»å‹**å­—æ®µæ”¯æŒè®¾ç½®"æœ€å°å€¼"å’Œ"æœ€å¤§å€¼"
- ä¸å¡«å†™æ—¶ï¼Œåç«¯ä¼šä½¿ç”¨é»˜è®¤èŒƒå›´è‡ªåŠ¨ç”Ÿæˆæ•°æ®
- å¡«å†™åï¼Œåç«¯ä¼šä¸¥æ ¼æŒ‰ç…§è®¾ç½®çš„åŒºé—´ç”Ÿæˆéšæœºæ•°æ®

### ä½¿ç”¨æ–¹æ³•
1. åœ¨å­—æ®µç±»å‹é…ç½®ç•Œé¢ï¼Œæ•°å­—/æ—¥æœŸç±»å‹å­—æ®µä¼šæ˜¾ç¤º"æœ€å°å€¼""æœ€å¤§å€¼"è¾“å…¥æ¡†
2. å¡«å†™éœ€è¦çš„åŒºé—´ï¼ˆå¦‚å¹´é¾„æœ€å°18ï¼Œæœ€å¤§65ï¼‰
3. ç‚¹å‡»"åº”ç”¨æ¨¡æ¿"ï¼Œåç«¯ä¼šæ ¹æ®åŒºé—´ç”Ÿæˆæ•°æ®

### ç¤ºä¾‹
```json
{
  "user_id": 0,
  "age": 0,
  "score": 0.0,
  "birth_date": ""
}
```

å¯ä»¥è®¾ç½®ï¼š
- `user_id`: æœ€å°=1000, æœ€å¤§=9999
- `age`: æœ€å°=18, æœ€å¤§=65
- `score`: æœ€å°=0.0, æœ€å¤§=100.0
- `birth_date`: æœ€å°=1990-01-01 00:00:00

## APIæ¥å£

### è·å–è¿æ¥æ•°
```bash
GET http://localhost:1883/api/connection-count
```
å“åº”ï¼š
```json
{
  "count": 2
}
```

### è·å–WebSocketä¿¡æ¯
```bash
GET http://localhost:1883/api/websocket-info
```
å“åº”ï¼š
```json
{
  "port": 1883,
  "path": "/",
  "url": "ws://localhost:1883/"
}
```

## å¤–éƒ¨æœåŠ¡è¿æ¥

### JavaScriptç¤ºä¾‹
```javascript
const ws = new WebSocket('ws://localhost:1883/');
ws.onopen = function() {
    console.log('è¿æ¥æˆåŠŸ');
    // å‘é€JSONæ¨¡æ¿
    ws.send(JSON.stringify({
        template: {"id": 0, "name": ""},
        fieldTypes: {"id": "int", "name": "string"}
    }));
};
ws.onmessage = function(event) {
    console.log('æ”¶åˆ°æ•°æ®:', event.data);
};
```

### Javaç¤ºä¾‹
```java
WebSocketContainer container = ContainerProvider.getWebSocketContainer();
Session session = container.connectToServer(
    new WebSocketClient(), 
    new URI("ws://localhost:1883/")
);
```

### Pythonç¤ºä¾‹
```python
import websocket
ws = websocket.WebSocket()
ws.connect("ws://localhost:1883/")
```

## é¡¹ç›®ç»“æ„

```
src/main/java/com/example/kineticsimulatorwebsocker/
â”œâ”€â”€ config/
â”‚   â”œâ”€â”€ CorsConfig.java                    # CORSé…ç½®
â”‚   â”œâ”€â”€ WebSocketConfig.java               # WebSocketé…ç½®
â”‚   â””â”€â”€ WebSocketProperties.java           # WebSocketå±æ€§é…ç½®
â”œâ”€â”€ controller/
â”‚   â”œâ”€â”€ DynamicOnlineCountController.java  # è¿æ¥æ•°æ§åˆ¶å™¨
â”‚   â””â”€â”€ WebSocketInfoController.java       # WebSocketä¿¡æ¯æ§åˆ¶å™¨
â”œâ”€â”€ websocket/
â”‚   â””â”€â”€ DynamicWebSocketServer.java        # åŠ¨æ€WebSocketæœåŠ¡
â””â”€â”€ KineticSimulatorWebSockerApplication.java

src/main/resources/
â”œâ”€â”€ static/
â”‚   â””â”€â”€ test-client.html                   # å‰ç«¯æµ‹è¯•é¡µé¢
â””â”€â”€ application.properties                 # åº”ç”¨é…ç½®
```

## æ ¸å¿ƒç»„ä»¶è¯´æ˜

### åŠ¨æ€WebSocketæœåŠ¡ (`DynamicWebSocketServer`)
- ç®¡ç†WebSocketè¿æ¥å’Œä¼šè¯
- å¤„ç†JSONæ¨¡æ¿å’Œå­—æ®µç±»å‹é…ç½®
- æ ¹æ®é…ç½®ç”Ÿæˆéšæœºæ•°æ®
- æ”¯æŒå­—æ®µé™åˆ¶åŠŸèƒ½
- è‡ªåŠ¨æ¨é€æ•°æ®åˆ°å®¢æˆ·ç«¯

### æ¨¡æ¿é…ç½®ç³»ç»Ÿ
- `TemplateConfig`: æ¨¡æ¿é…ç½®ç±»ï¼ŒåŒ…å«æ¨¡æ¿ã€å­—æ®µç±»å‹å’Œå­—æ®µé™åˆ¶
- `FieldLimit`: å­—æ®µé™åˆ¶ç±»ï¼Œå®šä¹‰æœ€å¤§å€¼æœ€å°å€¼
- æ”¯æŒåµŒå¥—å¯¹è±¡å’Œæ•°ç»„çš„é€’å½’å¤„ç†

### å‰ç«¯ç•Œé¢ (`test-client.html`)
- äº¤äº’å¼JSONæ¨¡æ¿ç¼–è¾‘å™¨
- æ™ºèƒ½å­—æ®µç±»å‹è¯†åˆ«å’Œé…ç½®
- å®æ—¶æ•°æ®é¢„è§ˆ
- è¿æ¥çŠ¶æ€ç›‘æ§

## æ³¨æ„äº‹é¡¹

1. é¡¹ç›®å·²é…ç½®ä¸ºä½¿ç”¨JDK 1.8ï¼Œè¯·ç¡®ä¿å¼€å‘ç¯å¢ƒä½¿ç”¨æ­£ç¡®çš„Javaç‰ˆæœ¬
2. WebSocketè¿æ¥å»ºç«‹åéœ€è¦å‘é€JSONæ¨¡æ¿æ‰èƒ½å¼€å§‹æ¥æ”¶æ•°æ®
3. å­—æ®µé™åˆ¶åŠŸèƒ½ä»…æ”¯æŒæ•°å­—ç±»å‹å’Œæ—¥æœŸç±»å‹
4. æ”¯æŒå¤šå®¢æˆ·ç«¯åŒæ—¶è¿æ¥ï¼Œæ¯ä¸ªå®¢æˆ·ç«¯å¯ä»¥æœ‰ä¸åŒçš„æ¨¡æ¿é…ç½®
5. å¦‚æœå®¢æˆ·ç«¯æœªå‘é€æ¨¡æ¿ï¼Œç³»ç»Ÿä¼šåœ¨3ç§’åè‡ªåŠ¨åˆ†é…å…¨å±€æ¨¡æ¿

## éªŒè¯ç¯å¢ƒ

æ‚¨å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤éªŒè¯ç¯å¢ƒé…ç½®ï¼š

```bash
# æ£€æŸ¥Javaç‰ˆæœ¬
java -version

# æ£€æŸ¥Mavenç‰ˆæœ¬
mvn -version

# æ£€æŸ¥Maven Wrapperç‰ˆæœ¬
./mvnw -version
```

## æ‰©å±•å¼€å‘

### æ·»åŠ æ–°çš„æ•°æ®ç±»å‹
åœ¨ `DynamicWebSocketServer` ç±»ä¸­çš„ `generateRandomByType` æ–¹æ³•ä¸­æ·»åŠ æ–°çš„caseåˆ†æ”¯ã€‚

### è‡ªå®šä¹‰å­—æ®µé™åˆ¶é€»è¾‘
ä¿®æ”¹ `generateRandomInt`ã€`generateRandomDouble` ç­‰æ–¹æ³•ï¼Œå®ç°è‡ªå®šä¹‰çš„é™åˆ¶é€»è¾‘ã€‚

### å®ç°å®šæ—¶æ¨é€
å¯ä»¥ä½¿ç”¨Springçš„ `@Scheduled` æ³¨è§£å®ç°å®šæ—¶æ¨é€åŠŸèƒ½ã€‚

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜
1. **è¿æ¥å¤±è´¥**: æ£€æŸ¥ç«¯å£1883æ˜¯å¦è¢«å ç”¨
2. **æ•°æ®ä¸æ¨é€**: ç¡®ä¿å·²å‘é€æœ‰æ•ˆçš„JSONæ¨¡æ¿
3. **å­—æ®µé™åˆ¶ä¸ç”Ÿæ•ˆ**: æ£€æŸ¥è¾“å…¥çš„æœ€å¤§æœ€å°å€¼æ ¼å¼æ˜¯å¦æ­£ç¡®

### æ—¥å¿—æŸ¥çœ‹
åº”ç”¨å¯åŠ¨åï¼Œå¯ä»¥åœ¨æ§åˆ¶å°æŸ¥çœ‹è¯¦ç»†çš„è¿æ¥å’Œæ•°æ®å¤„ç†æ—¥å¿—ã€‚

## å‚è€ƒèµ„æº

- [Spring Boot WebSocket å®˜æ–¹æ–‡æ¡£](https://spring.io/guides/gs/messaging-stomp-websocket/)
- [WebSocket API æ–‡æ¡£](https://developer.mozilla.org/en-US/docs/Web/API/WebSocket)
- [Jackson JSON å¤„ç†](https://github.com/FasterXML/jackson)

---

## ğŸ³ Docker éƒ¨ç½²

### å¿«é€Ÿéƒ¨ç½²ï¼ˆæ¨èï¼‰

#### Windowsç”¨æˆ·
1. åŒå‡»è¿è¡Œ `docker-start.bat`
2. ç­‰å¾…æœåŠ¡å¯åŠ¨å®Œæˆ
3. è®¿é—®ï¼š`http://localhost:1883/test-client.html`

#### Linux/macOSç”¨æˆ·
```bash
# ç»™è„šæœ¬æ‰§è¡Œæƒé™ï¼ˆä»…é¦–æ¬¡ï¼‰
chmod +x docker-start.sh

# è¿è¡Œå¯åŠ¨è„šæœ¬
./docker-start.sh
```

### æ‰‹åŠ¨éƒ¨ç½²

#### 1. æ„å»ºå¹¶å¯åŠ¨
```bash
# è¿›å…¥é¡¹ç›®ç›®å½•
cd kinetic-simulator-WebSocker

# å¯åŠ¨æœåŠ¡
docker-compose up -d
```

#### 2. æŸ¥çœ‹æœåŠ¡çŠ¶æ€
```bash
# æŸ¥çœ‹å®¹å™¨çŠ¶æ€
docker-compose ps

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f
```

#### 3. è®¿é—®åº”ç”¨
- æµ‹è¯•é¡µé¢ï¼š`http://localhost:1883/test-client.html`
- WebSocketï¼š`ws://localhost:1883/`
- APIæ¥å£ï¼š`http://localhost:1883/api/connection-count`

### Dockeræ„å»ºé—®é¢˜è§£å†³

å¦‚æœé‡åˆ°Dockeræ„å»ºé”™è¯¯ï¼ˆå¦‚Maven Wrapperç›¸å…³é”™è¯¯ï¼‰ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹æ–¹æ³•ï¼š

#### æ–¹æ³•1ï¼šä½¿ç”¨ä¿®å¤è„šæœ¬ï¼ˆæ¨èï¼‰
```bash
# Windows
fix-docker-build.bat

# Linux/macOS
./fix-docker-build.sh
```

#### æ–¹æ³•2ï¼šä½¿ç”¨å¤‡ç”¨Dockerfile
```bash
# ä½¿ç”¨æœ¬åœ°Mavençš„Dockerfile
docker build -f Dockerfile.maven -t websocket-simulator .
```

#### æ–¹æ³•3ï¼šæ‰‹åŠ¨ä¿®å¤
1. ç¡®ä¿é¡¹ç›®æ ¹ç›®å½•åŒ…å«ä»¥ä¸‹æ–‡ä»¶ï¼š
   - `mvnw` (Maven Wrapperè„šæœ¬)
   - `mvnw.cmd` (Windows Maven Wrapperè„šæœ¬)
   - `.mvn/` ç›®å½•
2. æ¸…ç†Dockerç¼“å­˜ï¼š`docker builder prune -f`
3. é‡æ–°æ„å»ºï¼š`docker build -t websocket-simulator .`

### å¸¸ç”¨Dockerå‘½ä»¤

| å‘½ä»¤ | è¯´æ˜ |
|------|------|
| `docker-compose up -d` | å¯åŠ¨æœåŠ¡ |
| `docker-compose down` | åœæ­¢æœåŠ¡ |
| `docker-compose restart` | é‡å¯æœåŠ¡ |
| `docker-compose logs -f` | æŸ¥çœ‹å®æ—¶æ—¥å¿— |
| `docker-compose ps` | æŸ¥çœ‹æœåŠ¡çŠ¶æ€ |

### è¯¦ç»†è¯´æ˜
æ›´å¤šDockerä½¿ç”¨è¯´æ˜è¯·å‚è€ƒï¼š[Docker.md](./Docker.md)

---

## ğŸš€ äº¤ä»˜éƒ¨ç½²

### ğŸ“‹ éƒ¨ç½²æ–‡æ¡£
è¯¦ç»†çš„äº¤ä»˜éƒ¨ç½²æŒ‡å—è¯·å‚è€ƒï¼š[äº¤ä»˜éƒ¨ç½².md](./äº¤ä»˜éƒ¨ç½².md)

### ğŸ¯ å¿«é€Ÿéƒ¨ç½²

#### è‡ªåŠ¨åŒ–éƒ¨ç½²è„šæœ¬
```bash
# Linux/macOS
./deploy-to-server.sh <æœåŠ¡å™¨IP> [ç”¨æˆ·å] [é•œåƒç‰ˆæœ¬] [é•œåƒä»“åº“]

# Windows
deploy-to-server.bat <æœåŠ¡å™¨IP> [ç”¨æˆ·å] [é•œåƒç‰ˆæœ¬] [é•œåƒä»“åº“]
```

#### éƒ¨ç½²æµç¨‹
1. **æœ¬åœ°æ„å»º** - æ„å»ºDockeré•œåƒ
2. **é•œåƒä¸Šä¼ ** - æ¨é€åˆ°Dockerä»“åº“
3. **è¿œç¨‹éƒ¨ç½²** - è‡ªåŠ¨éƒ¨ç½²åˆ°ç›®æ ‡æœåŠ¡å™¨
4. **æœåŠ¡éªŒè¯** - æ£€æŸ¥æœåŠ¡çŠ¶æ€

### ğŸŒ å¤šIPéƒ¨ç½²

é¡¹ç›®æ”¯æŒåŒæ—¶è¿è¡Œå¤šä¸ªä¸åŒIPåœ°å€çš„æœåŠ¡å®ä¾‹ï¼š

```bash
# Windows
start-multi-ip.bat

# Linux/macOS
./start-multi-ip.sh
```

å¤šIPéƒ¨ç½²å°†å¯åŠ¨ä»¥ä¸‹æœåŠ¡ï¼š
- 192.168.2.114:1883
- 192.168.2.115:1883 (ä¸»æœºç«¯å£1885)

è®¿é—®åœ°å€ï¼š
- http://192.168.2.114:1883/test-client.html
- http://192.168.2.115:1885/test-client.html

### Dockeré…ç½®æ–‡ä»¶

- `docker-compose.yml` - å•IPéƒ¨ç½²é…ç½®
- `docker-compose-multi-ip.yml` - å¤šIPéƒ¨ç½²é…ç½®
- `application-docker.properties` - Dockerç¯å¢ƒé…ç½®
- `application-192.168.2.114.properties` - IP1ä¸“ç”¨é…ç½®
- `application-192.168.2.115.properties` - IP2ä¸“ç”¨é…ç½®

---

## ğŸ“ é¡¹ç›®ç»“æ„

```
kinetic-simulator-WebSocker/
â”œâ”€â”€ src/                                    # æºä»£ç 
â”‚   â”œâ”€â”€ main/java/                         # Javaæºç 
â”‚   â”‚   â””â”€â”€ com/example/kineticsimulatorwebsocker/
â”‚   â”‚       â”œâ”€â”€ config/                    # é…ç½®ç±»
â”‚   â”‚       â”œâ”€â”€ controller/                # æ§åˆ¶å™¨
â”‚   â”‚       â”œâ”€â”€ websocket/                 # WebSocketæœåŠ¡
â”‚   â”‚       â””â”€â”€ KineticSimulatorWebSockerApplication.java
â”‚   â””â”€â”€ main/resources/
â”‚       â”œâ”€â”€ static/                        # é™æ€èµ„æº
â”‚       â”‚   â””â”€â”€ test-client.html          # å‰ç«¯æµ‹è¯•é¡µé¢
â”‚       â””â”€â”€ application.properties        # åº”ç”¨é…ç½®
â”œâ”€â”€ Dockerfile                             # Dockeré•œåƒæ„å»ºæ–‡ä»¶
â”œâ”€â”€ Dockerfile.maven                       # å¤‡ç”¨Dockerfileï¼ˆä½¿ç”¨æœ¬åœ°Mavenï¼‰
â”œâ”€â”€ docker-compose.yml                     # Docker Composeé…ç½®
â”œâ”€â”€ docker-compose-multi-ip.yml           # å¤šIP Docker Composeé…ç½®
â”œâ”€â”€ docker-start.bat                       # Windowså¯åŠ¨è„šæœ¬
â”œâ”€â”€ docker-start.sh                        # Linux/macOSå¯åŠ¨è„šæœ¬
â”œâ”€â”€ fix-docker-build.bat                   # Windows Dockeræ„å»ºä¿®å¤è„šæœ¬
â”œâ”€â”€ fix-docker-build.sh                    # Linux/macOS Dockeræ„å»ºä¿®å¤è„šæœ¬
â”œâ”€â”€ deploy-to-server.bat                   # WindowsæœåŠ¡å™¨éƒ¨ç½²è„šæœ¬
â”œâ”€â”€ deploy-to-server.sh                    # Linux/macOSæœåŠ¡å™¨éƒ¨ç½²è„šæœ¬
â”œâ”€â”€ application-docker.properties          # Dockerç¯å¢ƒé…ç½®
â”œâ”€â”€ .dockerignore                          # Dockerå¿½ç•¥æ–‡ä»¶
â”œâ”€â”€ Docker.md                              # Dockerä½¿ç”¨æŒ‡å—
â”œâ”€â”€ äº¤ä»˜éƒ¨ç½².md                            # äº¤ä»˜éƒ¨ç½²æŒ‡å—
â”œâ”€â”€ pom.xml                                # Mavené…ç½®
â””â”€â”€ README.md                              # é¡¹ç›®è¯´æ˜
```

---

## ğŸš€ éƒ¨ç½²æ–¹å¼å¯¹æ¯”

| éƒ¨ç½²æ–¹å¼ | ä¼˜ç‚¹ | ç¼ºç‚¹ | é€‚ç”¨åœºæ™¯ |
|----------|------|------|----------|
| **Docker** | ç¯å¢ƒä¸€è‡´ã€å¿«é€Ÿéƒ¨ç½²ã€æ˜“äºç®¡ç† | éœ€è¦å®‰è£…Docker | ç”Ÿäº§ç¯å¢ƒã€å›¢é˜Ÿåä½œ |
| **ä¼ ç»Ÿéƒ¨ç½²** | æ— éœ€é¢å¤–å·¥å…·ã€ç›´æ¥è¿è¡Œ | ç¯å¢ƒä¾èµ–ã€é…ç½®å¤æ‚ | å¼€å‘æµ‹è¯•ã€å•æœºéƒ¨ç½² |

---

## ğŸ¯ ä¸‹ä¸€æ­¥

1. **å­¦ä¹ Docker**ï¼šé˜…è¯» [Docker.md](./Docker.md) äº†è§£è¯¦ç»†ä½¿ç”¨æ–¹æ³•
2. **äº¤ä»˜éƒ¨ç½²**ï¼šé˜…è¯» [äº¤ä»˜éƒ¨ç½².md](./äº¤ä»˜éƒ¨ç½².md) äº†è§£ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²
3. **è‡ªå®šä¹‰é…ç½®**ï¼šä¿®æ”¹ `application-docker.properties` è°ƒæ•´æœåŠ¡é…ç½®
4. **ç”Ÿäº§éƒ¨ç½²**ï¼šæ ¹æ®å®é™…éœ€æ±‚è°ƒæ•´Dockeré…ç½®å’Œç½‘ç»œè®¾ç½®
5. **ç›‘æ§è¿ç»´**ï¼šé…ç½®æ—¥å¿—æ”¶é›†å’Œç›‘æ§å‘Šè­¦

---

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·ï¼š
1. æŸ¥çœ‹ [æ•…éšœæ’é™¤](#æ•…éšœæ’é™¤) éƒ¨åˆ†
2. é˜…è¯» [Docker.md](./Docker.md) è¯¦ç»†è¯´æ˜
3. é˜…è¯» [äº¤ä»˜éƒ¨ç½².md](./äº¤ä»˜éƒ¨ç½².md) éƒ¨ç½²æŒ‡å—
4. è”ç³»å¼€å‘å›¢é˜Ÿè·å–æ”¯æŒ

---

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ï¼Œè¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶ã€‚

---

## ğŸ™ è‡´è°¢

æ„Ÿè°¢æ‰€æœ‰ä¸ºé¡¹ç›®åšå‡ºè´¡çŒ®çš„å¼€å‘è€…å’Œç”¨æˆ·ï¼

---

*æœ€åæ›´æ–°æ—¶é—´ï¼š2024å¹´12æœˆ*

## ä½¿ç”¨è¯´æ˜

### 1. è¿æ¥WebSocket

1. æ‰“å¼€å‰ç«¯ç•Œé¢
2. ç‚¹å‡»"è¿æ¥"æŒ‰é’®å»ºç«‹WebSocketè¿æ¥
3. è¿æ¥æˆåŠŸåçŠ¶æ€æ˜¾ç¤ºä¸º"å·²è¿æ¥"

### 2. é…ç½®æ•°æ®æ¨¡æ¿

1. åœ¨JSONæ¨¡æ¿åŒºåŸŸè¾“å…¥æ•°æ®æ ¼å¼
2. è®¾ç½®å­—æ®µç±»å‹ï¼ˆstringã€numberã€booleanã€dateã€arrayç­‰ï¼‰
3. é…ç½®æœ€å¤§å€¼ã€æœ€å°å€¼èŒƒå›´
4. è®¾ç½®é»˜è®¤å€¼ï¼ˆå¯é€‰ï¼‰

### 3. åº”ç”¨æ¨¡æ¿

1. ç‚¹å‡»"åº”ç”¨æ¨¡æ¿"æŒ‰é’®å‘é€é…ç½®åˆ°åç«¯
2. åç«¯å°†æ ¹æ®é…ç½®ç”Ÿæˆéšæœºæ•°æ®
3. æ•°æ®å°†æŒ‰è®¾å®šçš„é¢‘ç‡æ¨é€åˆ°å‰ç«¯

### 4. é«˜çº§æ¨¡å¼

å¯ç”¨é«˜çº§æ¨¡å¼å¯ä»¥ï¼š
- é…ç½®å¤æ‚åµŒå¥—çš„JSONç»“æ„
- è®¾ç½®æ›´ç²¾ç»†çš„æ•°æ®ç”Ÿæˆè§„åˆ™
- æ”¯æŒæ•°ç»„å’Œå¯¹è±¡çš„ç»„åˆ

## é…ç½®è¯´æ˜

### æ•°æ®ç±»å‹æ”¯æŒ

- `string`: å­—ç¬¦ä¸²ç±»å‹
- `number`: æ•°å­—ç±»å‹
- `boolean`: å¸ƒå°”ç±»å‹
- `date`: æ—¥æœŸç±»å‹ (yyyy-MM-dd)
- `datetime`: æ—¥æœŸæ—¶é—´ç±»å‹ (yyyy-MM-dd HH:mm:ss)
- `array`: æ•°ç»„ç±»å‹
- `timestamp`: æ—¶é—´æˆ³ç±»å‹

### å­—æ®µé™åˆ¶é…ç½®

æ¯ä¸ªå­—æ®µå¯ä»¥è®¾ç½®ï¼š
- `min`: æœ€å°å€¼
- `max`: æœ€å¤§å€¼
- `default`: é»˜è®¤å€¼

### æ¨é€é¢‘ç‡

- é»˜è®¤æ¨é€é—´éš”ï¼š5ç§’
- å¯é€šè¿‡å‰ç«¯ç•Œé¢åŠ¨æ€è°ƒæ•´
- æ”¯æŒ1-60ç§’èŒƒå›´è®¾ç½®

## å¼€å‘è¯´æ˜

### æ·»åŠ æ–°çš„æ•°æ®ç±»å‹

1. åœ¨`DynamicWebSocketServer.java`ä¸­æ·»åŠ æ–°çš„ç±»å‹å¤„ç†é€»è¾‘
2. åœ¨å‰ç«¯`test-client.html`ä¸­æ·»åŠ å¯¹åº”çš„ç±»å‹é€‰é¡¹
3. æ›´æ–°æ–‡æ¡£è¯´æ˜

### è‡ªå®šä¹‰æ•°æ®ç”Ÿæˆè§„åˆ™

1. ç»§æ‰¿æˆ–ä¿®æ”¹`AdvancedDataGenerator`ç±»
2. å®ç°è‡ªå®šä¹‰çš„æ•°æ®ç”Ÿæˆé€»è¾‘
3. åœ¨WebSocketå¤„ç†å™¨ä¸­é›†æˆ

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **WebSocketè¿æ¥å¤±è´¥**
   - æ£€æŸ¥ç«¯å£æ˜¯å¦è¢«å ç”¨
   - ç¡®è®¤é˜²ç«å¢™è®¾ç½®
   - éªŒè¯IPåœ°å€é…ç½®

2. **æ•°æ®æ¨é€å¼‚å¸¸**
   - æ£€æŸ¥JSONæ¨¡æ¿æ ¼å¼
   - éªŒè¯å­—æ®µç±»å‹é…ç½®
   - æŸ¥çœ‹åç«¯æ—¥å¿—

3. **Dockeréƒ¨ç½²é—®é¢˜**
   - ç¡®è®¤DockeræœåŠ¡è¿è¡ŒçŠ¶æ€
   - æ£€æŸ¥ç«¯å£æ˜ å°„é…ç½®
   - éªŒè¯ç½‘ç»œè®¾ç½®

4. **Dockeræ„å»ºå¤±è´¥**
   - ä½¿ç”¨ä¿®å¤è„šæœ¬ï¼š`fix-docker-build.bat` æˆ– `fix-docker-build.sh`
   - ä½¿ç”¨å¤‡ç”¨Dockerfileï¼š`docker build -f Dockerfile.maven -t websocket-simulator .`
   - æ£€æŸ¥Maven Wrapperæ–‡ä»¶æ˜¯å¦å®Œæ•´

### æ—¥å¿—æŸ¥çœ‹

```bash
# æœ¬åœ°è¿è¡Œ
tail -f logs/application.log

# Dockerè¿è¡Œ
docker-compose logs -f

# å¤šIPéƒ¨ç½²
docker-compose -f docker-compose-multi-ip.yml logs -f
```

## è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨MITè®¸å¯è¯ã€‚

## è´¡çŒ®

æ¬¢è¿æäº¤Issueå’ŒPull Requestæ¥æ”¹è¿›é¡¹ç›®ã€‚
